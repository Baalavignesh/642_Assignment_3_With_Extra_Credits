<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <!-- Header -->
      <div class="mb-4">
        <h2 class="text-center">{{ isEditMode ? 'Update Survey' : 'Student Survey Form' }}</h2>
        <p class="text-center text-muted">Please fill out all required fields</p>
      </div>

      <!-- Success Message -->
      <div *ngIf="showSuccessMessage" class="alert alert-success" role="alert">
        Survey {{ isEditMode ? 'updated' : 'submitted' }} successfully!
      </div>

      <!-- Survey Form -->
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">Campus Visit Feedback</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="surveyForm" (ngSubmit)="onSubmit()">

            <!-- Personal Information Section -->
            <h6 class="border-bottom pb-2 mb-3">Personal Information</h6>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="firstName" class="form-label">First Name *</label>
                <input type="text" class="form-control" id="firstName" formControlName="firstName"
                  [class.is-invalid]="submitted && f['firstName'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['firstName'].errors">
                  First name is required
                </div>
              </div>
              <div class="col-md-6">
                <label for="lastName" class="form-label">Last Name *</label>
                <input type="text" class="form-control" id="lastName" formControlName="lastName"
                  [class.is-invalid]="submitted && f['lastName'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['lastName'].errors">
                  Last name is required
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="streetAddress" class="form-label">Street Address *</label>
              <input type="text" class="form-control" id="streetAddress" formControlName="streetAddress"
                [class.is-invalid]="submitted && f['streetAddress'].errors">
              <div class="invalid-feedback" *ngIf="submitted && f['streetAddress'].errors">
                Street address is required
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-5">
                <label for="city" class="form-label">City *</label>
                <input type="text" class="form-control" id="city" formControlName="city"
                  [class.is-invalid]="submitted && f['city'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['city'].errors">
                  City is required
                </div>
              </div>
              <div class="col-md-4">
                <label for="state" class="form-label">State *</label>
                <input type="text" class="form-control" id="state" formControlName="state"
                  [class.is-invalid]="submitted && f['state'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['state'].errors">
                  State is required
                </div>
              </div>
              <div class="col-md-3">
                <label for="zip" class="form-label">Zip Code *</label>
                <input type="text" class="form-control" id="zip" formControlName="zip"
                  [class.is-invalid]="submitted && f['zip'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['zip'].errors">
                  Valid 5-digit zip required
                </div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="telephone" class="form-label">Telephone Number *</label>
                <input type="tel" class="form-control" id="telephone" formControlName="telephone"
                  placeholder="1234567890" [class.is-invalid]="submitted && f['telephone'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['telephone'].errors">
                  Valid 10-digit phone number required
                </div>
              </div>
              <div class="col-md-6">
                <label for="email" class="form-label">Email *</label>
                <input type="email" class="form-control" id="email" formControlName="email"
                  [class.is-invalid]="submitted && f['email'].errors">
                <div class="invalid-feedback" *ngIf="submitted && f['email'].errors">
                  Valid email is required
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="dateOfSurvey" class="form-label">Date of Survey *</label>
              <input type="date" class="form-control" id="dateOfSurvey" formControlName="dateOfSurvey"
                [class.is-invalid]="submitted && f['dateOfSurvey'].errors">
              <div class="invalid-feedback" *ngIf="submitted && f['dateOfSurvey'].errors">
                Date of survey is required
              </div>
            </div>

            <!-- Campus Feedback Section -->
            <h6 class="border-bottom pb-2 mb-3 mt-4">Campus Feedback</h6>

            <div class="mb-3">
              <label class="form-label d-block">What did you like most about the campus?</label>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedStudents" formControlName="likedStudents">
                <label class="form-check-label" for="likedStudents">Students</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedLocation" formControlName="likedLocation">
                <label class="form-check-label" for="likedLocation">Location</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedCampus" formControlName="likedCampus">
                <label class="form-check-label" for="likedCampus">Campus</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedAtmosphere" formControlName="likedAtmosphere">
                <label class="form-check-label" for="likedAtmosphere">Atmosphere</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedDormRooms" formControlName="likedDormRooms">
                <label class="form-check-label" for="likedDormRooms">Dorm Rooms</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="likedSports" formControlName="likedSports">
                <label class="form-check-label" for="likedSports">Sports</label>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label d-block">How did you become interested in the university? *</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="interestFriends" value="friends"
                  formControlName="interestSource" [class.is-invalid]="submitted && f['interestSource'].errors">
                <label class="form-check-label" for="interestFriends">Friends</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="interestTelevision" value="television"
                  formControlName="interestSource">
                <label class="form-check-label" for="interestTelevision">Television</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="interestInternet" value="internet"
                  formControlName="interestSource">
                <label class="form-check-label" for="interestInternet">Internet</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" id="interestOther" value="other"
                  formControlName="interestSource">
                <label class="form-check-label" for="interestOther">Other</label>
              </div>
              <div class="invalid-feedback d-block" *ngIf="submitted && f['interestSource'].errors">
                Please select how you became interested
              </div>
            </div>

            <div class="mb-3">
              <label for="recommendationLikelihood" class="form-label">
                Likelihood of recommending this school to other students *
              </label>
              <select class="form-select" id="recommendationLikelihood" formControlName="recommendationLikelihood"
                [class.is-invalid]="submitted && f['recommendationLikelihood'].errors">
                <option value="">Select an option</option>
                <option value="Very Likely">Very Likely</option>
                <option value="Likely">Likely</option>
                <option value="Unlikely">Unlikely</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f['recommendationLikelihood'].errors">
                Please select a recommendation likelihood
              </div>
            </div>

            <div class="mb-3">
              <label for="additionalComments" class="form-label">Additional Comments</label>
              <textarea class="form-control" id="additionalComments" rows="4" formControlName="additionalComments"
                placeholder="Please share any additional feedback..."></textarea>
            </div>

            <!-- Form Buttons -->
            <div class="d-flex gap-2 justify-content-end mt-4">
              <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
              <button type="button" class="btn btn-outline-secondary" (click)="onReset()" *ngIf="!isEditMode">Reset</button>
              <button type="submit" class="btn btn-primary">{{ isEditMode ? 'Update' : 'Submit' }}</button>
            </div>
          </form>
        </div>
      </div>

      <div class="text-center mt-3 mb-5">
        <a routerLink="/" class="text-muted">Back to Home</a>
      </div>
    </div>
  </div>
</div>
